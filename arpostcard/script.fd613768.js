parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"zPaJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=()=>{let t=2,e=[];onmessage=(n=>{"encode"===n.data[0]?function(n){let s=n.length,i=new Uint8Array(s*t);for(let e=0;e<s;e++){let s=e*t,a=n[e];a>1?a=1:a<-1&&(a=-1),a*=32768,i[s]=a,i[s+1]=a>>8}e.push(i)}(n.data[1]):"dump"===n.data[0]&&function(n){let s=e.length?e[0].length:0,i=e.length*s,a=new Uint8Array(44+i),r=new DataView(a.buffer);r.setUint32(0,1380533830,!1),r.setUint32(4,36+i,!0),r.setUint32(8,1463899717,!1),r.setUint32(12,1718449184,!1),r.setUint32(16,16,!0),r.setUint16(20,1,!0),r.setUint16(22,1,!0),r.setUint32(24,n,!0),r.setUint32(28,n*t,!0),r.setUint16(32,t,!0),r.setUint16(34,8*t,!0),r.setUint32(36,1684108385,!1),r.setUint32(40,i,!0);for(let t=0;t<e.length;t++)a.set(e[t],t*s+44);e=[],postMessage(a.buffer,[a.buffer])}(n.data[1])})};exports.default=t;
},{}],"sXEQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./wave-encoder/index.js"));function t(e){return e&&e.__esModule?e:{default:e}}let s,i=window.AudioContext||window.webkitAudioContext,n=e=>{let t=e.toString().replace(/^(\(\)\s*=>|function\s*\(\))\s*{/,"").replace(/}$/,""),s=new Blob([t]);return new Worker(URL.createObjectURL(s))},r=e=>{let t=new Event("error");return t.data=new Error("Wrong state for "+e),t};class a{constructor(e,t=null){this.stream=e,this.config=t,this.state="inactive",this.em=document.createDocumentFragment(),this.encoder=n(a.encoder);let s=this;this.encoder.addEventListener("message",e=>{let t=new Event("dataavailable");t.data=new Blob([e.data],{type:s.mimeType}),s.em.dispatchEvent(t),"inactive"===s.state&&s.em.dispatchEvent(new Event("stop"))})}start(e){if("inactive"!==this.state)return this.em.dispatchEvent(r("start"));this.state="recording",s||(s=new i(this.config)),this.clone=this.stream.clone(),this.input=s.createMediaStreamSource(this.clone),this.processor=s.createScriptProcessor(2048,1,1),this.encoder.postMessage(["init",s.sampleRate]),this.processor.onaudioprocess=(e=>{"recording"===this.state&&this.encoder.postMessage(["encode",e.inputBuffer.getChannelData(0)])}),this.input.connect(this.processor),this.processor.connect(s.destination),this.em.dispatchEvent(new Event("start")),e&&(this.slicing=setInterval(()=>{"recording"===this.state&&this.requestData()},e))}stop(){return"inactive"===this.state?this.em.dispatchEvent(r("stop")):(this.requestData(),this.state="inactive",this.clone.getTracks().forEach(e=>{e.stop()}),this.processor.disconnect(),this.input.disconnect(),clearInterval(this.slicing))}pause(){return"recording"!==this.state?this.em.dispatchEvent(r("pause")):(this.state="paused",this.em.dispatchEvent(new Event("pause")))}resume(){return"paused"!==this.state?this.em.dispatchEvent(r("resume")):(this.state="recording",this.em.dispatchEvent(new Event("resume")))}requestData(){return"inactive"===this.state?this.em.dispatchEvent(r("requestData")):this.encoder.postMessage(["dump",s.sampleRate])}addEventListener(...e){this.em.addEventListener(...e)}removeEventListener(...e){this.em.removeEventListener(...e)}dispatchEvent(...e){this.em.dispatchEvent(...e)}}a.prototype.mimeType="audio/wav",a.isTypeSupported=(e=>a.prototype.mimeType===e),a.notSupported=!navigator.mediaDevices||!i,a.encoder=e.default;var o=a;exports.default=o;
},{"./wave-encoder/index.js":"zPaJ"}],"q991":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.openPage=o;var t=1;function e(t){return document.querySelector('[data-page="'.concat(t,'"]'))}function n(t){e(t).hidden=!0}function a(a){var i=e(t),o=e(a);o.classList.add("top","animate_rtl"),i.classList.remove("top","animate_ltr","animate_ltre_rtl"),setTimeout(n.bind(null,t),300),o.hidden=!1,t=a}function i(a){var i=e(t),o=e(a);o.classList.add("top","animate_ltr"),i.classList.remove("top","animate_ltr","animate_rtl"),setTimeout(n.bind(null,t),300),o.hidden=!1,t=a}function o(e){e>t?a(e):e<t&&i(e)}
},{}],"mpVp":[function(require,module,exports) {
"use strict";var e,t=o(require("audio-recorder-polyfill")),n=require("./paginator");function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,o,r,a,c){try{var d=e[a](c),i=d.value}catch(u){return void n(u)}d.done?t(i):Promise.resolve(i).then(o,r)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(o,a){var c=e.apply(t,n);function d(e){r(c,o,a,d,i,"next",e)}function i(e){r(c,o,a,d,i,"throw",e)}d(void 0)})}}window.MediaRecorder=window.MediaRecorder||t.default;var c=document.getElementById("start-record"),d=document.getElementById("stop-record"),i=document.getElementById("audio");c.addEventListener("click",function(){d.style.display="block",c.style.display="none",navigator.mediaDevices.getUserMedia({audio:!0}).then(function(t){(e=new MediaRecorder(t)).addEventListener("dataavailable",function(e){i.src=URL.createObjectURL(e.data)}),e.start(),document.getElementById("save-button").classList.add("hidden")})}),d.addEventListener("click",function(){e.stop(),e.stream.getTracks().forEach(function(e){return e.stop()}),document.getElementById("save-button").classList.remove("hidden"),i.controls=!0,d.style.display="none",c.style.display="block"}),document.querySelector("#select-button").addEventListener("click",function(){(0,n.openPage)(2)}),document.querySelector("#go-back-to-1").addEventListener("click",function(){return(0,n.openPage)(1)}),document.querySelector("#go-back-to-2").addEventListener("click",function(){return(0,n.openPage)(2)}),document.getElementById("save-button").addEventListener("click",function(){return(0,n.openPage)(3)}),document.getElementById("share-button").addEventListener("click",a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.share({title:"Demo",url:window.location.href});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))),document.querySelector("[data-resultLink]").addEventListener("click",function(){document.getElementById("audio").loop=!0,document.getElementById("audio").play()}),document.querySelector("[data-resultLink]").addEventListener("message",function(e){"_apple_ar_quicklook_button_tapped"===e.data&&console.log("lol")},!1);
},{"audio-recorder-polyfill":"sXEQ","./paginator":"q991"}]},{},["mpVp"], null)
//# sourceMappingURL=/arpostcard/script.fd613768.js.map